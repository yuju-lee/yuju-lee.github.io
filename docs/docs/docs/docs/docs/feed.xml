<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Judy&apos;s Devlog</title>
    <description>Cool developers never dies</description>
    <link>https://yuju-lee.github.io/</link>
    <atom:link href="https://yuju-lee.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 15 Jul 2024 01:04:51 +0900</pubDate>
    <lastBuildDate>Mon, 15 Jul 2024 01:04:51 +0900</lastBuildDate>
    <generator>Jekyll v4.3.3</generator>
    
      <item>
        <title>[Algorithm] Union find</title>
        <description>&lt;h2 id=&quot;ìœ ë‹ˆì˜¨-íŒŒì¸ë“œunion-find-ì„œë¡œì†Œ-ì§‘í•©&quot;&gt;ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ(Union-find, ì„œë¡œì†Œ ì§‘í•©)&lt;/h2&gt;

&lt;p&gt;ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ(Union-Find) ì•Œê³ ë¦¬ì¦˜, ë˜ëŠ” ì„œë¡œì†Œ ì§‘í•©(Disjoint Set) ìë£Œêµ¬ì¡°ëŠ” ë™ì  ì—°ê²°ì„± ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. ì´ ìë£Œêµ¬ì¡°ëŠ” ì£¼ë¡œ ê·¸ë˜í”„ì—ì„œ ì—°ê²°ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ëŠ” ë° ì‚¬ìš©ë˜ëŠ”ë°, ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ ìë£Œêµ¬ì¡°ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ì—°ì‚°ì„ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Union: ë‘ ê°œì˜ ì§‘í•©ì„ í•˜ë‚˜ì˜ ì§‘í•©ìœ¼ë¡œ í•©ì¹œë‹¤.&lt;/li&gt;
  &lt;li&gt;Find: íŠ¹ì • ì›ì†Œê°€ ì†í•œ ì§‘í•©ì„ ì°¾ëŠ”ë‹¤.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ìœ ë‹ˆì˜¨ íŒŒì¸ë“œì˜ ì£¼ìš” ê°œë…&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ì§‘í•© í‘œí˜„:
    &lt;ul&gt;
      &lt;li&gt;ê° ì›ì†ŒëŠ” ìì‹ ì„ ë¶€ëª¨ë¡œ ê°€ì§€ëŠ” íŠ¸ë¦¬ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤.&lt;/li&gt;
      &lt;li&gt;ì§‘í•©ì˜ ë£¨íŠ¸ ë…¸ë“œëŠ” ì§‘í•©ì˜ ëŒ€í‘œ(ë˜ëŠ” ë£¨íŠ¸)ë¡œ ê°„ì£¼ëœë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Find ì—°ì‚°:
    &lt;ul&gt;
      &lt;li&gt;ì£¼ì–´ì§„ ì›ì†Œê°€ ì†í•œ ì§‘í•©ì˜ ëŒ€í‘œë¥¼ ì°¾ëŠ”ë‹¤.&lt;/li&gt;
      &lt;li&gt;ê²½ë¡œ ì••ì¶•(Path Compression)ì„ í†µí•´ íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ì¤„ì—¬, ì´í›„ì˜ Find ì—°ì‚°ì´ ë” ë¹ ë¥´ê²Œ ìˆ˜í–‰ë˜ë„ë¡ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Union ì—°ì‚°:
    &lt;ul&gt;
      &lt;li&gt;ë‘ ê°œì˜ ì§‘í•©ì„ í•˜ë‚˜ë¡œ í•©ì¹œë‹¤.&lt;/li&gt;
      &lt;li&gt;Union by Rank ë˜ëŠ” Union by Size ê¸°ë²•ì„ ì‚¬ìš©í•˜ì—¬ íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ìœ ë‹ˆì˜¨ íŒŒì¸ë“œì˜ ìµœì í™” ê¸°ë²•&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ê²½ë¡œ ì••ì¶•(Path Compression):
    &lt;ul&gt;
      &lt;li&gt;Find ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ, ë°©ë¬¸í•œ ëª¨ë“  ë…¸ë“œë¥¼ ì§ì ‘ ë£¨íŠ¸ ë…¸ë“œì— ì—°ê²°í•˜ì—¬ &lt;strong&gt;íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ì¤„ì¸ë‹¤&lt;/strong&gt;.&lt;/li&gt;
      &lt;li&gt;ì´ ìµœì í™”ëŠ” Find ì—°ì‚°ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê±°ì˜ ìƒìˆ˜ ì‹œê°„ìœ¼ë¡œ ë§Œë“ ë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ë­í¬ì— ì˜í•œ í•©ì¹˜ê¸°(Union by Rank):
    &lt;ul&gt;
      &lt;li&gt;ê° íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ì¶”ì í•˜ê³ , í•­ìƒ ë†’ì´ê°€ ë‚®ì€ íŠ¸ë¦¬ë¥¼ ë†’ì´ê°€ ë†’ì€ íŠ¸ë¦¬ ì•„ë˜ì— ì—°ê²°í•˜ì—¬ íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ìµœì†Œí™”í•œë‹¤.&lt;/li&gt;
      &lt;li&gt;ì´ëŠ” íŠ¸ë¦¬ì˜ ê· í˜•ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ëœë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;í¬ê¸°ì— ì˜í•œ í•©ì¹˜ê¸°(Union by Size):
    &lt;ul&gt;
      &lt;li&gt;ê° ì§‘í•©ì˜ í¬ê¸°ë¥¼ ì¶”ì í•˜ê³ , í•­ìƒ ì‘ì€ íŠ¸ë¦¬ë¥¼ í° íŠ¸ë¦¬ ì•„ë˜ì— ì—°ê²°í•˜ì—¬ íŠ¸ë¦¬ì˜ ë†’ì´ë¥¼ ìµœì†Œí™”í•œë‹¤.&lt;/li&gt;
      &lt;li&gt;ì´ëŠ” Union by Rankì™€ ìœ ì‚¬í•˜ê²Œ íŠ¸ë¦¬ì˜ ê· í˜•ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ëœë‹¤.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ì‹œê°„ ë³µì¡ë„&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ê²½ë¡œ ì••ì¶•ê³¼ ë­í¬ì— ì˜í•œ í•©ì¹˜ê¸° ìµœì í™”ë¥¼ ì ìš©í•˜ë©´ ìœ ë‹ˆì˜¨ íŒŒì¸ë“œ ìë£Œêµ¬ì¡°ì˜ ì—°ì‚°ì€ ê±°ì˜ ìƒìˆ˜ ì‹œê°„ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ”ë°, ì •í™•íˆëŠ” ë§¤ìš° ëŠë¦¬ê²Œ ì¦ê°€í•˜ëŠ” ì—­ ì•„ì»¤ë§Œ í•¨ìˆ˜(inverse Ackermann function) ì‹œê°„ ë³µì¡ë„ì¸ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;O(Î±(n))&lt;/code&gt;ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤. ì´ í•¨ìˆ˜ëŠ” &lt;strong&gt;ì‹¤ì œë¡œëŠ” ê±°ì˜ ìƒìˆ˜ë¡œ ê°„ì£¼&lt;/strong&gt;ë  ìˆ˜ ìˆë‹¤.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/algorithm/algorithm-unionFind/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/algorithm/algorithm-unionFind/</guid>
        
        <category>Algorithm</category>
        
        <category>Union-find</category>
        
        
        <category>algorithm</category>
        
      </item>
    
      <item>
        <title>MSA-17. êµ¬ë§¤ ì˜¤í”ˆ ì‹œê° ê¸°ëŠ¥ êµ¬í˜„</title>
        <description>&lt;p&gt;ê²°ì œ ì§„ì… ë©”ì„œë“œì— ë‹¨ìˆœíˆ ìš”ì²­ ì‹œê°ê³¼ êµ¬ë§¤ ì˜¤í”ˆ ì‹œê°ì„ ë¹„êµí•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í–ˆë‹¤. ê·¸ë¦¬ê³  ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ê´€ë¦¬ìê°€ íŠ¹ì • ì œí’ˆì— ëŒ€í•œ StartTimeì„ ì§€ì •í•  ìˆ˜ ìˆê²Œ í•œë‹¤. êµ¬ë§¤ ì˜¤í”ˆ ì‹œê°ì´ ì„¤ì •ëœ ì œí’ˆì€ ë¹„êµ ë¡œì§ì„ í†µí•´ êµ¬ë§¤ ì‹œê°„ ì „ ê²°ì œë¥¼ í•  ìˆ˜ ì—†ê²Œ êµ¬í˜„í•˜ì˜€ë‹¤.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt; // íŠ¹ì • ì œí’ˆì˜ íŒë§¤ ì‹œì‘ ì‹œê°„ í™•ì¸
        LocalTime saleStartTime = saleTimeRepository.getProductSaleTime(productId);
        LocalTime now = LocalTime.now();
        if (saleStartTime != null &amp;amp;&amp;amp; now.isBefore(saleStartTime)) {
            return &quot;ê²°ì œëŠ” &quot; + saleStartTime.toString() + &quot;ë¶€í„° ê°€ëŠ¥í•©ë‹ˆë‹¤.&quot;;
        }
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt;@PostMapping(&quot;/sale-time/{productId}&quot;)
public String setProductSaleTime(@PathVariable int productId, @RequestParam String saleTime) {
    LocalTime saleStartTime = LocalTime.parse(saleTime, DateTimeFormatter.ofPattern(&quot;HH:mm&quot;));
    saleTimeRepository.setProductSaleTime(productId, saleStartTime);
    return &quot;Sale start time for product &quot; + productId + &quot; set to &quot; + saleStartTime.toString();
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2F7b3d4949-62a1-466f-b07e-65c16d9ac684%2FScreenshot_2024-07-09_at_6.38.13_PM.png?table=block&amp;amp;id=7964d64f-88fc-42f8-820f-198c6a4aa377&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=2000&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì˜¤í”ˆí•  ì œí’ˆ idì™€ ì‹œê°ì„ ì´ë ‡ê²Œ Paramìœ¼ë¡œ ìš”ì²­í•  ìˆ˜ ìˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2F56c5750a-c1ee-42c4-a25e-5306f2da4785%2FScreenshot_2024-07-09_at_6.38.35_PM.png?table=block&amp;amp;id=ba858a55-c8e0-434b-a8dd-1267f9a39dc1&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=2000&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê²°ì œ ì‹œê° ì „ì˜ ê²°ì œ ìš”ì²­ì„ ì•„ì˜ˆ ê±°ë¶€í•œë‹¤.&lt;/p&gt;
</description>
        <pubDate>Tue, 09 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-17-schduler/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-17-schduler/</guid>
        
        <category>Test-tool</category>
        
        <category>LuaScript</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-16. ë£¨ì•„ìŠ¤í¬ë¦½íŠ¸ ë¡œì§ ì „í™˜</title>
        <description>&lt;p&gt;ì²˜ìŒ ê°€ìƒëŒ€ê¸°ì—´ ë¡œì§ì— ëŒ€í•´ ì–´ë–»ê²Œ ìƒê°í–ˆëƒë©´â€¦ ì¹œêµ¬ë“¤ì´ ì¢‹ì•„í•˜ëŠ” ê°€ìˆ˜ë‚˜ ì¶•êµ¬, ì•¼êµ¬ í‹°ì¼“íŒ…ì„ ë§¤ë²ˆ ë„ì™€ë‹¬ë¼ê³  í•´ì„œ (ë³„ë¡œ ì˜í•˜ì§€ë„ ì•ŠëŠ”ë°ë„) ì¸í„°íŒŒí¬ë‚˜ ì—¬íƒ€ ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì˜ í‹°ì¼“íŒ…ì„ ê²½í—˜í•´ ë³¸ ì ì´ ì¢€ ìˆë‹¤. ê·¸ë˜ì„œ ë‚´ê°€ í‹°ì¼“íŒ…ì„ í–ˆì„ ë•Œì˜ ê·¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ê·¸ëŒ€ë¡œ êµ¬í˜„í•˜ë©´ ì–´ë–¨ê¹Œ, ë¼ëŠ” ìƒê°ìœ¼ë¡œ ê¸°íší–ˆë˜ êµ¬ì¡°ê°€ ê°€ìƒ ëŒ€ê¸°ì—´ì´ë¼ëŠ” êµ¬ì¡°ì˜€ë‹¤. ë†€ì´ê³µì›ì²˜ëŸ¼ íë¡œ ëŒ€ê¸°ì—´ì„ ì œí•œí•˜ê³ , ì¬ê³ ê°€ í’€ë¦¬ë©´ ë‹¤ì‹œ ê·¸ ëŒ€ê¸°ì—´ì— ìš”ì²­ì„ ë°›ì•„ì„œ ì„ ì°©ìˆœ (ì¬ê³ ìˆ˜ëŸ‰) ëª…ë§Œ ê²°ì œí•  ìˆ˜ ìˆê²Œë”â€¦? ì·¨ì†Œê°€ ìƒê¸°ë©´ ì·¨ì†Œ ì¬ê³ ë§Œí¼ ë‹¤ì‹œ ëŒ€ê¸°ì—´ì„ ë¹„ìš°ê³  ê·¸ ëŒ€ê¸°ì—´ì„ ë‹¤ì‹œ ì±„ìš°ëŠ” ë°©í–¥ìœ¼ë¡œ ìƒê°í–ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë‹¤ë§Œ, í˜¼ìì„œ ë„ˆë¬´ ì˜¤ë˜ ìƒê°í•œ ë‚˜ë¨¸ì§€ ë‹¤ë¥¸ ì‹œì„ ìœ¼ë¡œ ë´¤ì„ ë•Œ ë¬¸ì œê°€ ìˆì§„ ì•Šì„ê¹Œ - ë‚´ê°€ ë‚´ ê¸°íšì— ë§¤ëª°ë˜ì–´ìˆì§„ ì•Šì„ê¹Œ í•˜ëŠ” ì—¼ë ¤ì— ë©˜í† ë‹˜ê»˜ í•´ë‹¹ ë¡œì§ì„ ì„¤ëª…ë“œë¦¬ê³  ì–´ë–»ê²Œ ìƒê°í•˜ì‹œëƒ ì—¬ì­¤ ë´¤ë”ë‹ˆ ë³´í†µì€ ë¶„ì‚° ë½ìœ¼ë¡œ êµ¬í˜„í•œë‹¤ê³ ëŠ” í•˜ë‚˜ ë‚´ê°€ ìƒê°í•œ ë¡œì§ì´ ë ì§€ ì•ˆ ë ì§€ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì§ì ‘ í•´ë´ì•¼ ì•Œ ê²ƒ ê°™ë‹¤ê³  í•˜ì…¨ë‹¤. ê·¸ë˜ì„œ í…ŒìŠ¤íŠ¸ íˆ´ì„ êµ¬ì¶•í•´ ë‘ ë¡œì§ì„ ì „ë¶€ í…ŒìŠ¤íŠ¸í–ˆë‹¤. ì´ì „ í…ŒìŠ¤íŠ¸ ê²°ê³¼ì—ì„œì²˜ëŸ¼ ë¶„ì‚°ë½ì€ 10ê°œê°€ ì„±ê³µí•˜ì˜€ê³ , ê°€ìƒëŒ€ê¸°ì—´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤ì œ ì¬ê³ ëŠ” ì°¨ê°ë˜ì§€ë§Œ ë™ì‹œì„±ì´ ë³´ì¥ë˜ì§€ ì•Šì•„ íì—ëŠ” ë“¤ì–´ê°”ë‹¤. ê·¸ëŸ¬ë‚˜ ê²°ì œ í”„ë¡œì„¸ìŠ¤ê¹Œì§€ ë„˜ì–´ê°€ì§ˆ ëª» í–ˆë‹¤. í•´ë‹¹ ë¡œì§ì€ ë™ì‹œì„± ë³´ì¥ì´ ì–´ë ¤ì› ê³ , í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ” ëª¨ë‘ ì‹¤íŒ¨í–ˆë‹¤. ê·¸ë˜ì„œ ë¶„ì‚°ë½ìœ¼ë¡œ ì„ íƒí•˜ì˜€ìœ¼ë‚˜â€¦ &lt;strong&gt;ë¶„ì‚°ë½ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ ì´ìƒí•œ ì ì„ ë°œê²¬&lt;/strong&gt;í–ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2Fd449b6d8-6955-4b60-83da-b7ed5ad239cb%2FScreenshot_2024-07-10_at_12.53.25_AM.png?table=block&amp;amp;id=8e0b5ff2-2fe2-4ca7-9362-5f44c08fad28&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1740&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ìœ„ ê²°ê³¼ë¥¼ ë³´ë©´ ë¬´ë ¤ 42ë²ˆì§¸ë¡œ ëˆ„ë¥¸ ì‚¬ëŒì´ ê°€ì ¸ê°€ë²„ë¦¬ëŠ” ë¶ˆìƒì‚¬ ë°œìƒí•œë‹¤. ë˜í•œ Eì—´ì´ ìš”ì²­ ì‹œê°ì¸ë°, ë³´ë©´ ë°€ë¦¬ì„¸ì»¨ë“œì—” í™•ì‹¤íˆ ì‹œê°„ì°¨ê°€ ìˆë‹¤.&lt;/p&gt;

&lt;p&gt;ì§€ê¸ˆê¹Œì§€ ë¶„ì‚° ë½ìœ¼ë¡œ êµ¬í˜„í–ˆë˜ ë¡œì§ì˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ë´¤ëŠ”ë°, ìœ„ì™€ ê°™ì´ &lt;strong&gt;ì„ ì°©ìˆœ êµ¬ë§¤ê°€ ë˜ì§€ ì•ŠëŠ” ê²ƒ&lt;/strong&gt; ì´ì—ˆë‹¤. ë½ì„ ìºì¹˜í•˜ëŠ” ê±´ ê²°êµ­ ëœë¤ì´ì—ˆë˜ ê²ƒâ€¦ ã… ã…  ê·¸ë˜ì„œ ë¨¼ì € ì ‘ì†í•œ(ë¬¼ë¡  ë™ì‹œë¼ê³ ëŠ” í•˜ì§€ë§Œ ë°€ë¦¬ì„¸ì»¨ë“œì—ì„œ ì°¨ì´ê°€ ë‚˜ ìš”ì²­ì—ëŠ” ì „ë¶€ ìˆœì„œê°€ ìˆë‹¤) ì‚¬ëŒì´ ë½ì„ ê°€ì ¸ê°€ì§€ ëª» í•´ êµ¬ë§¤í•˜ì§€ ëª» í•˜ê³  ìˆì—ˆë‹¤. ê²°êµ­ &lt;strong&gt;ê²°ê³¼ì ìœ¼ë¡  10ëª…ì—ê²Œ íŒë§¤ê°€ ë˜ì—ˆìœ¼ë‚˜ êµ¬ë§¤ ê³¼ì •ì—ì„  ì—„ë°€íˆ ë§í•´ ì„ ì°©ìˆœì€ ì•„ë‹ˆì—ˆë‹¤!&lt;/strong&gt; ì´ëŠ” E-commerce ë„ë©”ì¸ì—ì„œëŠ” ê½¤ë‚˜ ë¦¬ìŠ¤í¬ê°€ í¬ë‹¤ê³  ìƒê°í–ˆë‹¤. ê·¸ë¦¬ê³  ê°€ì¥ ì²˜ìŒ í…ŒìŠ¤íŠ¸í–ˆë˜ ê±´ 23ì´ˆë‚˜ ê±¸ë ¸ë‹¤. ê·¸ë˜ì„œ ë¡œì§ì„ ë‹¤ì‹œ ë³€ê²½í•˜ì˜€ë‹¤.&lt;/p&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;to-be&quot;&gt;To-be&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ë¶„ì‚° ë½ ì œê±°&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;Lua ìŠ¤í¬ë¦½íŠ¸ì˜ ì›ìì„±ì„ ì´ìš©í•˜ì—¬ &lt;strong&gt;ë¶„ì‚° ë½ ì—†ì´ ë™ì‹œì„±ì„ ì œì–´&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Lua ìŠ¤í¬ë¦½íŠ¸ ì ìš©&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ì¬ê³  í™•ì¸, ê°ì†Œ, ì£¼ë¬¸ ìƒì„±ì„ í•˜ë‚˜ì˜ ì›ìì  ì—°ì‚°ìœ¼ë¡œ ìˆ˜í–‰&lt;/li&gt;
      &lt;li&gt;Redisì—ì„œ ëª¨ë“  ì‘ì—…ì„ ìˆ˜í–‰í•´ ì„±ëŠ¥ì´ í–¥ìƒì‹œí‚´&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ë¹„ë™ê¸° ì²˜ë¦¬&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ì£¼ë¬¸ ì²˜ë¦¬ì™€ ì¬ê³  ë™ê¸°í™”ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ì—¬ &lt;strong&gt;ì‘ë‹µ ì‹œê°„ ê°œì„ &lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ë¡¤ë°± ì²˜ë¦¬&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ê²°ì œ ì‹¤íŒ¨ ì‹œ Lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ ì¬ê³  ë³µêµ¬&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2Feee648d6-9ec5-4097-a6ce-bf3629b8e49f%2FScreenshot_2024-07-10_at_1.15.48_AM.png?table=block&amp;amp;id=1a1b3c16-93a8-456e-a130-50faea865649&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1770&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ê²°êµ­ ë ˆë””ìŠ¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ê³ , LuaìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ë™ì‹œ ì‘ì—…ì„ ì§„í–‰í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ ì‚¬ìš© + LuaìŠ¤í¬ë¦½íŠ¸ì˜ ì›ìì„±ì„ í†µí•´ ë™ì‹œì„±ì„ ë³´ì¥í–ˆë‹¤. ê¸°íší–ˆë˜ ì²˜ìŒì˜ ë¡œì§ê³¼ ë¹„ìŠ·í•˜ë‹¤. ë‹¤ë§Œ ì²˜ìŒ ë¡œì§ê³¼ ë‹¤ë¥¸ ì ì€ lua ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ ì¬ê³  í™•ì¸, ê°ì†Œ, ì£¼ë¬¸ ìƒì„±ì„ ë™ì‹œì— ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì´ë‹¤.&lt;/p&gt;

&lt;p&gt;ì¶”í›„ ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ Kafkaë¥¼ í†µí•´ SQL ë‚´ ì¬ê³  ì°¨ê° ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ëŠ” Write-back ë¡œì§ì€ ê·¸ëŒ€ë¡œ ê°€ì ¸ê°”ë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;test-result-summary&quot;&gt;Test Result Summary&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;TPS
    &lt;ul&gt;
      &lt;li&gt;As-is: 175.76&lt;/li&gt;
      &lt;li&gt;To-be: 235.38&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;â†’ ê¸°ì¡´ ë¡œì§ &lt;strong&gt;ëŒ€ë¹„ â–²33.92% í–¥ìƒ&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Test Takt time(Average, sec)
    &lt;ul&gt;
      &lt;li&gt;As-is: 23.63681054&lt;/li&gt;
      &lt;li&gt;To-be: 11.17878842&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;â†’ 10000ê±´ì˜ ìš”ì²­ ì™„ë£Œ ì‹œê°„ â–¼52.71% ê°ì†Œ&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;request duration(Average, sec)
    &lt;ul&gt;
      &lt;li&gt;As-is: 0.2293712116&lt;/li&gt;
      &lt;li&gt;To-be: 0.1102334264&lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;strong&gt;â†’ 10000ê±´ ê°œë³„ ìš”ì²­ ì‘ë‹µ ì‹œê°„ â–¼51.94% ê°ì†Œ&lt;/strong&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;í…ŒìŠ¤íŠ¸ ê²°ê³¼ë„ ì˜ í™•ì¸ë˜ì—ˆë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ì˜€ê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì ìœ ìœ¨, CPU ì ìœ ìœ¨ ë“±ë„ í™•ì¸í•´ ë´ì•¼ í•œë‹¤.&lt;/p&gt;
</description>
        <pubDate>Tue, 09 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-16-changedProcess/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-16-changedProcess/</guid>
        
        <category>Test-tool</category>
        
        <category>LuaScript</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-15. ìë™í™” í…ŒìŠ¤íŠ¸ íˆ´ ì œì‘</title>
        <description>&lt;h3 id=&quot;python-ìŠ¤í¬ë¦½íŠ¸ë¡œ-ê³¼ë¶€í•˜-í…ŒìŠ¤íŠ¸&quot;&gt;Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ê³¼ë¶€í•˜ í…ŒìŠ¤íŠ¸&lt;/h3&gt;

&lt;p&gt;ì¿¼ë¦¬ë¬¸ìœ¼ë¡œ 10000ëª…ì˜ íšŒì› ì •ë³´ë¥¼ ë„£ì—ˆë‹¤.
&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2Fdbf328e7-f800-4d94-adad-8fac9e1429d8%2FScreenshot_2024-07-07_at_2.34.30_AM.png?table=block&amp;amp;id=23d99b6d-4d55-442c-98d4-38ef652ec8cc&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1120&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ì´ë©”ì¼ ì¸ì¦ì„ ìš°íšŒí•˜ê¸° ìœ„í•´ enabled=trueë¡œ ì§ì ‘ ì§€ì •í•˜ì—¬ 10000ê°œë¥¼ ìƒì„±.&lt;/p&gt;

&lt;p&gt;ì´ë©”ì¼, í† í° ì •ë³´ê°€ í—¤ë”ì— ë“¤ì–´ê°€ì•¼ í•˜ë‹ˆ 10000ëª…ì„ ìˆœì°¨ì ìœ¼ë¡œ ë¡œê·¸ì¸ ì‹œí‚¤ëŠ” íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ ëŒë¦° ë’¤, ì´ ì •ë³´ë¥¼ í—¤ë”ì— í•¨ê»˜ ë„£ì–´ ê²°ì œ ì§„ì… APIë¡œ ë™ì‹œì— ìš”ì²­í•œë‹¤. ê·¸ë¦¬ê³  ê²°ê³¼ë¥¼ txt íŒŒì¼ë¡œ ë½‘ì•„ summaryí–ˆë‹¤.&lt;/p&gt;

&lt;p&gt;ë¶„ì‚° ë½ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì˜€ì„ ë•Œì—ëŠ” ì„œë²„ê°€ í„°ì§€ê±°ë‚˜ ê·¸ëŸ¬ì§„ ì•Šì•˜ë‹¤. orderë„ ì˜ ìƒì„±ë˜ì—ˆìŒ.&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2Faff44e53-cf32-4c26-91ee-578402eb38cb%2FScreenshot_2024-07-07_at_2.38.30_AM.png?table=block&amp;amp;id=79486b68-9142-4a08-84ee-77047b956dd5&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1440&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;center&gt;ì²« ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼&lt;/center&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2F9de5acea-1fb6-467e-a7a5-c8cde6569593%2FScreenshot_2024-07-07_at_2.36.30_AM.png?table=block&amp;amp;id=5a85c351-c15e-4916-886b-bdf8fb5b027b&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1440&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;center&gt;ë‘ ë²ˆì§¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼&lt;/center&gt;

&lt;hr /&gt;

&lt;p&gt;ëª¨ë“  ê²°ê³¼ëŠ” &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1EtPv7QxRM_sXQHPGmroqycDekuZ1-orG6XYZ0TE27EQ/edit?gid=356041803#gid=356041803&quot;&gt;ì—¬ê¸°&lt;/a&gt;ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.&lt;/p&gt;
</description>
        <pubDate>Sat, 06 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-15-testTool/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-15-testTool/</guid>
        
        <category>Test-tool</category>
        
        <category>Distributed-lock</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-14. Feign Client ì ìš©ê¸°</title>
        <description>&lt;p&gt;ê¸°ì¡´ì— ëŠìŠ¨í•œ ê²°í•©ì„ ì¤‘ìš” ìˆœìœ„ 1ìˆœìœ„ë¡œ ìƒê°í•´ ê²°ì œ-ì£¼ë¬¸ ë¡œì§ì„ ì œì™¸í•œ Serviceê°„ì˜ í†µì‹ ë„ Kafkaë¥¼ í†µí•œ ë¹„ë™ê¸° í†µì‹ ìœ¼ë¡œ êµ¬í˜„í–ˆì—ˆë‹¤. ë‹¤ë§Œ Kafkaì˜ ë¹„ë™ê¸° í†µì‹  íŠ¹ì„± ìƒ, ì´ë²¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë°œí–‰ë˜ëŠ” ì‘ë‹µì„ ìˆ˜ì‹  Serviceê°€ ì œëŒ€ë¡œ ë°›ì§€ ëª» í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•˜ì—¬ Latchë¡œ ì°¨ì´ë¥¼ ë’€ëŠ”ë°, ì´ëŸ´ ë°”ì—ëŠ” feign client ë°©ì‹ìœ¼ë¡œì˜ ë™ê¸° í†µì‹ ê³¼ Kafkaì˜ ë¹„ë™ê¸° í†µì‹ ì„ ì ì ˆíˆ í˜¼ìš©í•˜ëŠ” ë°©í–¥ì´ ë”ìš± ê°„ê²°í•˜ë‹¤ê³  íŒë‹¨í•˜ì˜€ë‹¤. ë”°ë¼ì„œ ë‹¨ìˆœí•œ ìš”ì²­ê³¼ ì‘ë‹µì„ ì£¼ê³ ë°›ëŠ” ê±´ feign clientë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë¡œì§ì„ ë³€ê²½í•˜ì˜€ë‹¤.&lt;/p&gt;

&lt;p&gt;í˜„ì¬ ë‚´ í”„ë¡œì íŠ¸ì—ì„œì˜ ì„œë¹„ìŠ¤ê°„ ë‹¨ìˆœ í†µì‹ ì€ ì•„ë˜ì™€ ê°™ê³ , ì´ ë¡œì§ì„ ì „ë¶€ ë³€ê²½í–ˆë‹¤.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;myPage&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Product Service â†’ Member Service / ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì „ë‹¬ / ì™„ë£Œ&lt;/li&gt;
  &lt;li&gt;Order Service â†’ Member Service / ì£¼ë¬¸ë‚´ì—­ ì „ë‹¬ / ì™„ë£Œ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;createOrder&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Prodcut Service â†’ Order Service / ìƒí’ˆ ì •ë³´ / ì™„ë£Œ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ë³€ê²½ ê³¼ì •ì€ ì–´ë µì§€ ì•Šì•˜ìœ¼ë‚˜, ì—ëŸ¬ê°€ í•œ ë²ˆ ìƒê²¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…í•œ ê¸°ë¡ì´ë‹¤.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt;java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration.propertySourcesPlaceholderConfigurer
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ë­ í•œ ê²ƒë„ ì—†ëŠ”ë° ì˜¤ë¥˜ê°€ ë‚˜ì„œ ì°¾ì•„ ë³´ë‹ˆ Spring Coludë‘ Springboot ë²„ì „ì´ ë§ì§€ ì•Šì•„ì„œì˜€ë‹¤. Spring Cloud ë²„ì „ì„ ë§ì¶° ì£¼ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ë‹ˆ ì˜ ëë‹¤.&lt;/p&gt;
</description>
        <pubDate>Sat, 06 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-14-feignClient/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-14-feignClient/</guid>
        
        <category>Feign-Client</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-13. ì¬ê³  ë°ì´í„°ì˜ ë¬´ê²°ì„± ë³´ì¥</title>
        <description>&lt;p&gt;ë‚¨ì€ ìˆ˜ëŸ‰ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¤„ì–´ë“¤ê¸° ë•Œë¬¸ì— ìµœëŒ€í•œ ë¹ ë¥´ê²Œ Read &amp;amp; Write í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.&lt;/p&gt;

&lt;p&gt;ë”°ë¼ì„œ ì‹¤ì œ ì¬ê³  ë°ì´í„°ëŠ” ProductServiceì˜ ì—°ê²°ëœ MySQL - spring_proj_product DBì— ì €ì¥ë˜ì–´ ìˆì§€ë§Œ ë¹ ë¥¸ ì½ê¸°ì™€ ì“°ê¸°ë¥¼ ìœ„í•´ Redisë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì´ìš©í–ˆë‹¤. ì¬ê³  ê´€ë¦¬ë¥¼ ìœ„í•œ RedisëŠ” ë‹¨ í•˜ë‚˜, ëª¨ë“  ì„œë¹„ìŠ¤ê°€ í†µí•©í•˜ì—¬ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— Redisë¥¼ ì—°ê²°ë§Œ í•´ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.&lt;/p&gt;

&lt;p&gt;Redis ì¬ê³ ì™€ SQL DB ì‚¬ì´ì˜ ë¬´ê²°ì„± ë³´ì¥ì€ &lt;strong&gt;ê²°ì œ ê³¼ì • ì¤‘ ê²°ì œê°€ ì™„ë£Œë˜ì–´ ì£¼ë¬¸ì´ ìƒì„±ë˜ì—ˆì„ ë•Œì—ë§Œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰&lt;/strong&gt;í•œë‹¤.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt;Map&amp;lt;String, Object&amp;gt; stockUpdateData = new HashMap&amp;lt;&amp;gt;();
stockUpdateData.put(&quot;productId&quot;, productId);
stockUpdateData.put(&quot;stock&quot;, redisTemplate.opsForValue().get(redisKey));
kafkaTemplate.send(stockUpdateTopic, objectMapper.writeValueAsString(stockUpdateData));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ê²°ì œê°€ ì™„ë£Œë˜ë©´ ì´ëŸ° ì‹ìœ¼ë¡œ ì¹´í”„ì¹´ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•œë‹¤. ê·¸ëŸ¼ Paymentì—ì„œ ë°œí–‰í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ë˜ Product Serviceê°€ ê²°ì œ ì™„ë£Œ ì´ë²¤íŠ¸ ì‹œ ë°œìƒí–ˆì„ ë•Œ ì´ë²¤íŠ¸ë¥¼ ëƒ‰í¼ ë°›ì•„ sql ë‚´ ì €ì¥ëœ ì¬ê³ ë¥¼ ì°¨ê°í•˜ëŠ” ë¡œì§ì„ ìˆ˜í–‰í•œë‹¤.&lt;/p&gt;

&lt;p&gt;ì´ë ‡ê²Œ í•˜ë©´ ë°˜ëŒ€ë¡œ Paymentê°€ í„°ì ¸ì„œ ë ˆë””ìŠ¤ê°€ ê¸°ë¡í•˜ì§€ ëª» í•´ë„ MySQL ë°ì´í„°ê°€ ë‚¨ì•„ìˆì–´ì„œ ê´œì¶˜í•˜ë‹¤.&lt;/p&gt;

&lt;p&gt;ê²°ì œëŠ” ì´ë ‡ê²Œ í–ˆê³ , ì£¼ë¬¸ ê³¼ì •ì—ì„œ ì£¼ë¬¸ í›„ ì·¨ì†Œ / ë°°ì†¡ í›„ ì·¨ì†Œ(Return)ë„ MySQL ë°ì´í„°ì™€ ë ˆë””ìŠ¤ë¥¼ ë™ì‹œì— ì¬ê³ ë¥¼ ë³µêµ¬í•˜ë„ë¡ í–ˆë‹¤.&lt;/p&gt;
</description>
        <pubDate>Wed, 03 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-13-integrityGuaranteed/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-13-integrityGuaranteed/</guid>
        
        <category>Redis</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-12. ë¶„ì‚°ë½ ì „í™˜ê¸°</title>
        <description>&lt;p&gt;ê¸°íší–ˆë˜ ëŒ€ë¡œ ìš°ì„  êµ¬í˜„í•´ ë³´ì•˜ë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ê²°ì œ-ì§„ì…-ë¡œì§&quot;&gt;ê²°ì œ ì§„ì… ë¡œì§&lt;/h3&gt;

&lt;p&gt;í´ë¼ì´ì–¸íŠ¸ëŠ” ê²°ì œ ìš”ì²­ì„ í•˜ë©´ ëŒ€ê¸°ì—´ì— ì§„ì…í•œë‹¤. (Client â†’ PaymentController â†’ PaymentQueueService â†’ PaymentService)&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;PaymentController&lt;/strong&gt;: ê²°ì œ ìš”ì²­ì„ ìˆ˜ì‹ &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;PaymentQueueService:&lt;/strong&gt; ê²°ì œ ìš”ì²­ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•˜ê³  ëŒ€ê¸°ì—´ì—ì„œ ìš”ì²­ì„ ê°€ì ¸ì˜´&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;PaymentService:&lt;/strong&gt; ì£¼ê¸°ì ìœ¼ë¡œ ëŒ€ê¸°ì—´ì„ í™•ì¸í•˜ì—¬ ê²°ì œ ìš”ì²­ ì²˜ë¦¬ (1ì´ˆë¡œ ì¼ë‹¨ ì¡ìŒ)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;í´ë¼ì´ì–¸íŠ¸ëŠ” ê²°ì œ ìš”ì²­ì„ í•  ë•Œ {ì œí’ˆëª…, êµ¬ë§¤ìˆ˜ëŸ‰} í˜•ì‹ìœ¼ë¡œ PaymentServiceì— ìš”ì²­í•œë‹¤.&lt;/p&gt;

&lt;p&gt;í´ë¼ì´ì–¸íŠ¸ì˜ ê²°ì œ ìš”ì²­ì„ PaymentQueueServiceê°€ ë°›ìœ¼ë©´, &lt;strong&gt;ì‹¤ì‹œê°„ ì¬ê³ í™•ì¸ì„ ìš°ì„ ì ìœ¼ë¡œ ì§„í–‰&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ì¬ê³ ê°€ ë‚¨ì•„ìˆëŠ” ê²½ìš° ê°€ìƒ ëŒ€ê¸°ì—´ì— ì¶”ê°€&lt;/li&gt;
  &lt;li&gt;ì¬ê³ ê°€ ì—†ëŠ” ê²½ìš° ëŒ€ê¸°ì—´ ì¶”ê°€ ê±°ë¶€ â†’ í’ˆì ˆ ë©”ì‹œì§€ ì‘ë‹µ&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;PaymentServiceëŠ” ëŒ€ê¸°ì—´ì˜ ìš”ì²­ì„ ê²°ì œ ìš”ì²­ ë¡œì§ì„ ê²°ì œ ì„œë¹„ìŠ¤ë¡œ ë³´ë‚¸ë‹¤. (ê²°ì œ ì‹œë„ ì‹¤íŒ¨ 20% / ê²°ì œ ì¤‘ ì‹¤íŒ¨ 20%)
ê²°ì œëŠ” ì‹¤ì œ ê²°ì œê°€ ì´ë£¨ì–´ì§€ì§€ ì•Šê¸° ë•Œë¬¸ì— ê²°ì œê°€ ì„±ê³µí•˜ë©´ ê²°ì œ ë©”ì‹œì§€ì™€ í•¨ê»˜ í•´ë‹¹ ì •ë³´ë¥¼ order ì„œë¹„ìŠ¤ë¡œ ë³´ë‚´ê³ , ê²°ì œê°€ ì‹¤íŒ¨í•˜ë©´ ë ˆë””ìŠ¤ì—ì„œ ì¬ê³ ë¥¼ ë°”ë¡œ ë³µêµ¬í•œë‹¤.&lt;/p&gt;

&lt;p&gt;ì—¬ê¸°ê¹Œì§€ëŠ” êµ¬í˜„í•˜ì˜€ìœ¼ë‚˜, ë¶„ì‚°ë½ìœ¼ë¡œë„ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤ê³  í•œë‹¤. ë”°ë¼ì„œ ë¶„ì‚°ë½ ì™„ì„± â†’ í…ŒìŠ¤íŠ¸íˆ´ êµ¬ì¶• â†’ ë¶„ì‚°ë½ í…ŒìŠ¤íŠ¸í•˜ê³  ì´ì „ ê°€ìƒ ëŒ€ê¸°ì—´ë¡œ ë¡¤ë°±í•´ì„œ ê°™ì€ í…ŒìŠ¤íŠ¸íˆ´ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ ë³¼ ì˜ˆì •ì´ë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;ë¶„ì‚°ë½ì´ë€-&quot;&gt;ë¶„ì‚°ë½ì´ë€? ğŸ”&lt;/h3&gt;

&lt;p&gt;ë¶„ì‚° ë½ì€ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ê°€ ë™ì‹œì— íŠ¹ì • ìì›ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ í•˜ëŠ” ë½ ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤. ì´ëŠ” ì£¼ë¡œ Redisì™€ ê°™ì€ ì¸ë©”ëª¨ë¦¬ ë°ì´í„° ì €ì¥ì†Œë¥¼ í†µí•´ êµ¬í˜„ë˜ë©°, ê³ ì†ì˜ ë½/ì–¸ë½ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ì—¬ ë¶„ì‚° í™˜ê²½ì—ì„œ íš¨ìœ¨ì ì¸ ìì› ê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì¥ì ì´ë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;redisë¥¼-ì‚¬ìš©í•œ-ë¶„ì‚°-ë½ì˜-ì‘ë™-ë°©ì‹&quot;&gt;Redisë¥¼ ì‚¬ìš©í•œ ë¶„ì‚° ë½ì˜ ì‘ë™ ë°©ì‹&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ë½ íšë“ (Lock Acquisition)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;í´ë¼ì´ì–¸íŠ¸ëŠ” íŠ¹ì • í‚¤ì— ëŒ€í•´ SETNX (Set if Not Exists) ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë½ì„ ì‹œë„&lt;/li&gt;
      &lt;li&gt;ë½ í‚¤ì— ëŒ€í•œ ê°’ì„ â€œlockedâ€ë¡œ ì„¤ì •í•˜ê³ , ìœ íš¨ ì‹œê°„(TTL)ì„ ì„¤ì •í•˜ì—¬ ìë™ìœ¼ë¡œ ë½ í•´ì œ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ë½ í•´ì œ (Lock Release)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;í´ë¼ì´ì–¸íŠ¸ëŠ” ì‘ì—…ì´ ì™„ë£Œëœ í›„ ë½ í•´ì œ â†’ DEL ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë½ í‚¤ ì‚­ì œ
        &lt;ul&gt;
          &lt;li&gt;ë½ í•´ì œ ì‹œ í‚¤ê°€ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ì— ì˜í•´ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŒì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì›ìì  ì²´í¬ì™€ ì‚­ì œ ì‚¬ìš©&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ë½ ìœ íš¨ ì‹œê°„ (Lock Expiry)&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ë½ì„ ì„¤ì •í•  ë•Œ ìœ íš¨ ì‹œê°„ì„ ì„¤ì •í•˜ì—¬ íŠ¹ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ ë½ì´ í•´ì œ
        &lt;ul&gt;
          &lt;li&gt;ì´ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì–´ ë½ì„ í•´ì œí•˜ì§€ ëª»í•  ê²½ìš°ì—ë„ ë‹¤ë¥¸ í´ë¼ì´ì–¸íŠ¸ê°€ ë½ì„ íšë“í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•  ìˆ˜ ìˆìŒ&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt;public String processPayment(String email, int productId, int amount) throws JsonProcessingException {
    // ì œí’ˆ ì¬ê³ ë¥¼ ìœ„í•œ Redis í‚¤
    String redisKey = redisStockKeyPrefix + productId;

    // ë¶„ì‚° ë½ì„ 10ì´ˆ ë™ì•ˆ íšë“ ì‹œë„
    Boolean acquired = redisTemplate.opsForValue().setIfAbsent(redisKey + &quot;:lock&quot;, &quot;locked&quot;, 10, TimeUnit.SECONDS);
    if (acquired != null &amp;amp;&amp;amp; acquired) {
        try {
            // Redisì—ì„œ í˜„ì¬ ì¬ê³  ê°’ì„ ê°€ì ¸ì˜´
            String stockValueStr = redisTemplate.opsForValue().get(redisKey);

            if (stockValueStr != null) {
                Integer stock = Integer.valueOf(stockValueStr);

                // ì¬ê³  í™•ì¸
                if (stock &amp;gt;= amount) {
                    // ê²°ì œ ì‹¤íŒ¨ í™•ë¥  20%
                    boolean paymentSuccess = random.nextDouble() &amp;gt;= 0.2;

                    if (paymentSuccess) {
                        // ê²°ì œ ì„±ê³µ ì‹œ ì¬ê³  ì°¨ê°
                        redisTemplate.opsForValue().decrement(redisKey, amount);

                        // Kafka ì´ë²¤íŠ¸ ë°œí–‰
                        Map&amp;lt;String, Object&amp;gt; orderData = new HashMap&amp;lt;&amp;gt;();
                        orderData.put(&quot;email&quot;, email);
                        orderData.put(&quot;productId&quot;, productId);
                        orderData.put(&quot;amount&quot;, amount);
                        orderData.put(&quot;status&quot;, &quot;COMPLETED&quot;);
                        kafkaTemplate.send(&quot;order-topic&quot;, objectMapper.writeValueAsString(orderData));
                        System.out.println(&quot;order sent&quot;);

                        // Kafka ì¬ê³  ì°¨ê° ì´ë²¤íŠ¸ ë°œí–‰
                        Map&amp;lt;String, Object&amp;gt; stockUpdateData = new HashMap&amp;lt;&amp;gt;();
                        stockUpdateData.put(&quot;productId&quot;, productId);
                        stockUpdateData.put(&quot;stock&quot;, redisTemplate.opsForValue().get(redisKey));
                        kafkaTemplate.send(stockUpdateTopic, objectMapper.writeValueAsString(stockUpdateData));

                        System.out.println(&quot;Payment succeeded for &quot; + email + &quot; for product &quot; + productId);
                            return &quot;Payment succeeded for &quot; + email + &quot; for product &quot; + productId;
                        } else {
                            System.out.println(&quot;Payment failed for &quot; + email + &quot; for product &quot; + productId);
                            return &quot;Payment failed for &quot; + email + &quot; for product &quot; + productId;
                        }
                    } else {
                    System.out.println(&quot;ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ì¬ê³ : &quot; + stock);
                    return &quot;ì¬ê³ ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. í˜„ì¬ ì¬ê³ : &quot; + stock;
                }
            } else {
                System.out.println(&quot;ì¬ê³  ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Redis í‚¤: &quot; + redisKey);
                return &quot;ì¬ê³  ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. Redis í‚¤: &quot; + redisKey;
            }
        } finally {
            // ë½ í•´ì œ
            redisTemplate.delete(redisKey + &quot;:lock&quot;);
        }
    } else {
        System.out.println(&quot;ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.&quot;);
        return &quot;ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.&quot;;
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ê³ , í…ŒìŠ¤íŠ¸ ì‹œ ê²°ì œê°€ ì™„ë£Œë˜ì—ˆë‹¤.&lt;/p&gt;
</description>
        <pubDate>Wed, 03 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-12-distributedLock/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-12-distributedLock/</guid>
        
        <category>Kafka</category>
        
        <category>Redis</category>
        
        <category>Transaction</category>
        
        <category>Distributed-Lock</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-11. ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ì²˜ë¦¬ ë°©ë²•ì— ëŒ€í•œ í”„ë¡œì íŠ¸ ê¸°íš</title>
        <description>&lt;p&gt;ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ì²˜ë¦¬ì— ëŒ€í•œ ê²½í—˜ì´ ì—†ì–´ ê¸°íšë¶€í„° ì–´ë ¤ì› ë‹¤. ê·¸ë˜ë„ ì–´ë–»ê²Œ ì²˜ë¦¬í•  ê²ƒì¸ì§€ ì˜ˆìƒë˜ëŠ” ë¡œì§ì„ ê¸°íší•˜ê³  êµ¬í˜„í•´ ë³´ë ¤ê³  í•œë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;idea&quot;&gt;&lt;em&gt;IDEA&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;ê°€ìƒ ëŒ€ê¸°ì—´ì„ ì‚¬ìš©í•˜ì—¬ êµ¬ë§¤ ì˜¤í”ˆí•˜ìë§ˆì ì ‘ì†í•œ ì´ˆê¸° ì ‘ì†ìë¥¼ ê´€ë¦¬í•˜ê³ , ê²°ì œ ì‹œì—ëŠ” Redisë¥¼ ì‚¬ìš©í•˜ì—¬ ì¬ê³ ë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•˜ë©°, ì˜ˆì•½ ìƒíƒœë¥¼ í†µí•´ ê²°ì œ í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;êµ¬ë§¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´&lt;/strong&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ê°€ìƒ ëŒ€ê¸°ì—´ì— ì¶”ê°€&lt;/strong&gt;: ì‚¬ìš©ìê°€ ê²°ì œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ê°€ìƒ ëŒ€ê¸°ì—´ì— ì¶”ê°€ë˜ì–´ ì¬ê³  ì„œë¹„ìŠ¤ì— ì¬ê³  í™•ì¸ ìš”ì²­ ë³´ë‚¸ ë’¤ ì¬ê³  ì„œë¹„ìŠ¤ì—ì„œ ì¬ê³ ë¥¼ í™•ì¸í•˜ê³ , ì¬ê³ ê°€ ì¶©ë¶„í•˜ë©´ &lt;strong&gt;ì¬ê³  ì˜ˆì•½&lt;/strong&gt;
    &lt;ol&gt;
      &lt;li&gt;ì¬ê³ ê°€ ì—†ì„ ì‹œ ëŒ€ê¸°ì—´ ì¶”ê°€ X â†’ êµ¬ë§¤ ì˜ˆì•½ìœ¼ë¡œ ì´ë™&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ëŒ€ê¸°ì—´ì—ì„œ ì²˜ë¦¬&lt;/strong&gt;: ëŒ€ê¸°ì—´ì—ì„œ ì°¨ë¡€ê°€ ë˜ë©´ ê²°ì œ ìš”ì²­ ì„œë¹„ìŠ¤ë¡œ ë³´ë‚´ ê²°ì œ ì²˜ë¦¬ ì‹œì‘&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ê²°ì œ ì²˜ë¦¬&lt;/strong&gt;: ê²°ì œ ì„œë¹„ìŠ¤ì—ì„œ ê²°ì œë¥¼ ì²˜ë¦¬í•˜ê³ , ê²°ì œê°€ ì„±ê³µí•˜ë©´ ìµœì¢…ì ìœ¼ë¡œ ì£¼ë¬¸ í™•ì •
    &lt;ol&gt;
      &lt;li&gt;ê²°ì œê°€ ì‹¤íŒ¨í•˜ë©´ ì¬ê³  ì˜ˆì•½ì„ ì·¨ì†Œí•˜ê³ , ì£¼ë¬¸ ì·¨ì†Œ&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ìƒíƒœ ì—…ë°ì´íŠ¸&lt;/strong&gt;: ê° ì„œë¹„ìŠ¤ëŠ” ìƒíƒœë¥¼ ì„±ê³µìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê³ , ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•´ OrderServiceë¡œ ë°œì†¡&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;ëª¨ë“  ì¬ê³ ê°€ ì†Œì§„(í’ˆì ˆ)ë˜ë©´ êµ¬ë§¤ ì˜ˆì•½ì„ ê±¸ì–´ ë†“ì„ ìˆ˜ ìˆìœ¼ë©°, ì·¨ì†Œ ì¬ê³  ë°œìƒ ì‹œ ì˜ˆì•½ìì—ê²Œ ì´ë©”ì¼ë¡œ ì•Œë¦¼ &amp;gt; ì´í›„ ìœ„ì˜ ë¡œì§ì„ ë‹¤ì‹œ ì ìš©&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ê°€ìƒ-ëŒ€ê¸°ì—´&quot;&gt;ê°€ìƒ ëŒ€ê¸°ì—´&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2F3cec5d45-1253-40d4-b2d8-46a077552762%2FUntitled.png?table=block&amp;amp;id=68f4fb32-ded7-4723-9c61-4fa0b912ef84&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=770&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;Untitled&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ê°œë…&quot;&gt;ê°œë…&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ì‚¬ìš©ì ìš”ì²­ ìˆ˜ì§‘&lt;/strong&gt;: ëª¨ë“  ì‚¬ìš©ìê°€ í•œ ë²ˆì— ì„œë²„ì— ì ‘ì†í•˜ì§€ ì•Šë„ë¡ ìš”ì²­ì„ ëŒ€ê¸°ì—´ì— ìˆ˜ì§‘í•¨
    &lt;ul&gt;
      &lt;li&gt;íŠ¹ì • n ê°œ ì´ìƒì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš°, ê°€ìƒ ëŒ€ê¸°ì—´ì„ ìƒì„±í•˜ëŠ” ë¡œì§ìœ¼ë¡œ ì´ë™í•´ì•¼ í•  ë“¯&lt;/li&gt;
      &lt;li&gt;ê·¸ëŸ¼ â€œì–´ë–¤ ê¸°ì¤€â€ ì‹œê°„ì— â€œnê°œì˜ ìš”ì²­â€ì´ ë“¤ì–´ì˜¤ëŠ”ì§€ ê°ì‹œí•˜ëŠ” ë¡œì§ë„ í•„ìš”í•  ê²ƒ ê°™ìŒ&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ìˆœì°¨ ì²˜ë¦¬&lt;/strong&gt;: ëŒ€ê¸°ì—´ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ìš”ì²­ì„ êº¼ë‚´ì–´ ì²˜ë¦¬&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ìƒíƒœ ê´€ë¦¬&lt;/strong&gt;: ëŒ€ê¸°ì—´ì˜ ìƒíƒœë¥¼ ì‚¬ìš©ìì—ê²Œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ì„¤ê³„&quot;&gt;ì„¤ê³„&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;DB êµ¬ì¡°
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Queue Table&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;id: ê³ ìœ  ì‹ë³„ì (PK)&lt;/li&gt;
          &lt;li&gt;memberEmail: ì‚¬ìš©ì ì‹ë³„ì&lt;/li&gt;
          &lt;li&gt;requestTime: ìš”ì²­ ì‹œê°„&lt;/li&gt;
          &lt;li&gt;status: ìš”ì²­ ìƒíƒœ&lt;/li&gt;
          &lt;li&gt;position: ëŒ€ê¸°ì—´ì—ì„œì˜ ìœ„ì¹˜&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ë¡œì§
    &lt;ol&gt;
      &lt;li&gt;&lt;strong&gt;ìš”ì²­ ìˆ˜ì§‘&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;ì‚¬ìš©ìê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ë©´ ìš”ì²­ì„ ëŒ€ê¸°ì—´ í…Œì´ë¸”ì— ì €ì¥&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;ëŒ€ê¸°ì—´ ìƒíƒœ í™•ì¸&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;ì‚¬ìš©ìê°€ ìš”ì²­í•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ëŒ€ê¸°ì—´ ìœ„ì¹˜ ë° ì˜ˆìƒ ëŒ€ê¸° ì‹œê°„ ë°˜í™˜&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;ìš”ì²­ ì²˜ë¦¬&lt;/strong&gt;
        &lt;ul&gt;
          &lt;li&gt;ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì„ í†µí•´ ëŒ€ê¸°ì—´ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ìš”ì²­ì„ ê°€ì ¸ì™€ ì²˜ë¦¬&lt;/li&gt;
          &lt;li&gt;ì²˜ë¦¬ í›„ ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ ì‚¬ìš©ìì—ê²Œ ê²°ê³¼ í†µì§€&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ë¶„ì‚°-íŠ¸ëœì­ì…˜&quot;&gt;ë¶„ì‚° íŠ¸ëœì­ì…˜&lt;/h2&gt;

&lt;h3 id=&quot;saga-íŒ¨í„´&quot;&gt;Saga íŒ¨í„´&lt;/h3&gt;

&lt;p&gt;Saga íŒ¨í„´ì€ ê¸´ ì‹¤í–‰ ì‹œê°„ íŠ¸ëœì­ì…˜ì„ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ë‹¤. ê° ë‹¨ê³„ëŠ” ë…ë¦½ì ì¸ ë¡œì»¬ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ë©°, ì‹¤íŒ¨ ì‹œ ë³´ìƒ íŠ¸ëœì­ì…˜ì„ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;ë ˆë””ìŠ¤-í™œìš©&quot;&gt;ë ˆë””ìŠ¤ í™œìš©&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ê²°ì œ ìƒì„± ìš”ì²­ ì²˜ë¦¬&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Order Service&lt;/strong&gt;ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì£¼ë¬¸ ìš”ì²­ì„ ë°›ìœ¼ë©´ ìš”ì²­ëœ ê° ìƒí’ˆì— ëŒ€í•´ Redisì—ì„œ ì¬ê³  í™•ì¸&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ì›ìì  ì¬ê³  ê°ì†Œ&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ê²°ì œ ì²˜ë¦¬&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;Payment Service&lt;/strong&gt;ëŠ” ê²°ì œ ìš”ì²­ì„ ì²˜ë¦¬&lt;/li&gt;
      &lt;li&gt;ê²°ì œ ì„±ê³µ ì‹œ ì¬ê³  ì—…ë°ì´íŠ¸ë¥¼ í™•ì •&lt;/li&gt;
      &lt;li&gt;ê²°ì œ ì‹¤íŒ¨ ì‹œ Redisì—ì„œ ì›ìì ìœ¼ë¡œ ì¬ê³  ë³µì›&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;â†’ Lua ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©í•˜ê¸°&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;&lt;img src=&quot;https://yuju-lee.notion.site/image/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F44912d2a-41d8-4efb-a178-49f42e164aad%2Fae6bf094-d7d2-464e-be75-6f85042f8f64%2FIMG_0265.png?table=block&amp;amp;id=b62775cf-72e8-4c23-acca-4b1670dda2d9&amp;amp;spaceId=44912d2a-41d8-4efb-a178-49f42e164aad&amp;amp;width=1440&amp;amp;userId=&amp;amp;cache=v2&quot; alt=&quot;&quot; /&gt;
(ë„ˆë¬´ ëŒ€ì¶© ê·¸ë ¸ë‹¤â€¦)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;ProductService&lt;/strong&gt;:
    &lt;ul&gt;
      &lt;li&gt;Redisì™€ MySQLì„ ë™ê¸°í™”í•˜ì—¬ ì¬ê³ ë¥¼ ê´€ë¦¬í•˜ê³ , Kafkaë¥¼ í†µí•´ ì¬ê³  ì¦ê° êµ¬ë…&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;PaymentQueueService&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;ê²°ì œ ìš”ì²­ì„ ë°›ì•„ Redisì—ì„œ ì¬ê³ ë¥¼ í™•ì¸í•˜ê³ , ì¬ê³ ê°€ ì¶©ë¶„í•  ê²½ìš° ìš”ì²­ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;PaymentService&lt;/strong&gt;:
    &lt;ul&gt;
      &lt;li&gt;ëŒ€ê¸°ì—´ì„ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ì—¬ ê²°ì œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³ , 20% í™•ë¥ ë¡œ ê²°ì œë¥¼ ì‹¤íŒ¨&lt;/li&gt;
      &lt;li&gt;ê²°ì œê°€ ì„±ê³µí•˜ë©´ order-request-topicìœ¼ë¡œ ì •ë³´ë¥¼ ì „ì†¡, ì‹¤íŒ¨ ì‹œ ì¬ê³  ë³µêµ¬ í›„ ì‹¤íŒ¨ ì‘ë‹µ ë°˜í™˜&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;OrderService&lt;/strong&gt;:
    &lt;ul&gt;
      &lt;li&gt;order-request-topicì—ì„œ ê²°ì œ ì„±ê³µ ì •ë³´ë¥¼ ë°›ì•„ ì£¼ë¬¸ì„ ìƒì„±&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Wed, 03 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-11-payment/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-11-payment/</guid>
        
        <category>Kafka</category>
        
        <category>Redis</category>
        
        <category>Transaction</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-10. ë™ì‹œ ë¡œê·¸ì•„ì›ƒ</title>
        <description>&lt;p&gt;ë°œê¸‰í•œ ëª¨ë“  ë¦¬í€˜ìŠ¤íŠ¸ í† í°ê³¼ ì—‘ì„¸ìŠ¤ í† í°ì„ ë¬´íš¨í™”í•˜ë©´ ëœë‹¤. ë ˆë””ìŠ¤ì—ì„œ ìš”ì²­í•œ í•´ë‹¹ ì´ë©”ì¼ë¡œ ë“±ë¡ëœ ëª¨ë“  í† í° ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” ë°©ì‹.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;as-is&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ë¡œê·¸ì¸
    &lt;ol&gt;
      &lt;li&gt;ë¡œê·¸ì¸ ì‹œ ì´ë©”ì¼ / ë¹„ë²ˆ í™•ì¸&lt;/li&gt;
      &lt;li&gt;ë§ì„ ê²½ìš° ë¦¬í”„ë ˆì‹œ í† í° ì—¬ë¶€ í™•ì¸
        &lt;ol&gt;
          &lt;li&gt;ë¦¬í”„ë ˆì‹œ í† í° ì—†ì„ ê²½ìš° ë¦¬í”„ë ˆì‹œ / ì—‘ì„¸ìŠ¤ í† í° ë°œê¸‰í•´ ë¦¬í”„ë ˆì‹œ í† í°ë§Œ ì €ì¥&lt;/li&gt;
          &lt;li&gt;ë¦¬í”„ë ˆì‹œ í† í° ìˆì„ ê²½ìš° ì—‘ì„¸ìŠ¤ í† í° ë°œê¸‰&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;ë¡œê·¸ì•„ì›ƒ
    &lt;ol&gt;
      &lt;li&gt;ë¡œê·¸ì•„ì›ƒ ì‹œ í—¤ë”ì— ì—‘ì„¸ìŠ¤ í† í°ì„ í¬í•¨í•´ ìš”ì²­&lt;/li&gt;
      &lt;li&gt;ì—‘ì„¸ìŠ¤ í† í°ì„ ë ˆë””ìŠ¤ì˜ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡ (1ì‹œê°„ ë’¤ ì‚¬ë¼ì§€ê²Œ ì„¤ì •)&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;to-be&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ë¡œê·¸ì¸
    &lt;ol&gt;
      &lt;li&gt;ë¡œê·¸ì¸ ì‹œ ì´ë©”ì¼ / ë¹„ë²ˆ í™•ì¸&lt;/li&gt;
      &lt;li&gt;ì´ë©”ì¼, ë¹„ë²ˆ ë§ì„ ê²½ìš° ë¦¬í”„ë ˆì‹œ í† í° ì—¬ë¶€ í™•ì¸
        &lt;ol&gt;
          &lt;li&gt;ë¦¬í”„ë ˆì‹œ í† í° ì—†ì„ ê²½ìš° ë¦¬í”„ë ˆì‹œ / ì—‘ì„¸ìŠ¤ í† í° ë°œê¸‰í•˜ê³  &lt;strong&gt;ë¦¬í”„ë ˆì‹œ, ì—‘ì„¸ìŠ¤ í† í° ë‘˜ ë‹¤ ì €ì¥&lt;/strong&gt;&lt;/li&gt;
          &lt;li&gt;ë¦¬í”„ë ˆì‹œ í† í° ìˆì„ ê²½ìš° &lt;strong&gt;ì—‘ì„¸ìŠ¤ í† í° ë°œê¸‰ í›„ ì €ì¥&lt;/strong&gt;&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;ì¼ë°˜ ë¡œê·¸ì•„ì›ƒ
    &lt;ol&gt;
      &lt;li&gt;ë¡œê·¸ì•„ì›ƒ ì‹œ í—¤ë”ì— ì—‘ì„¸ìŠ¤ í† í°ì„ í¬í•¨í•´ ìš”ì²­&lt;/li&gt;
      &lt;li&gt;ì—‘ì„¸ìŠ¤ í† í°ì„ ë ˆë””ìŠ¤ì˜ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;ëª¨ë“  ê¸°ê¸° ë¡œê·¸ì•„ì›ƒ
    &lt;ol&gt;
      &lt;li&gt;í—¤ë”ì— ì´ë©”ì¼ ì •ë³´ë¥¼ í¬í•¨í•´ ë¡œê·¸ì•„ì›ƒ ìš”ì²­&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;í•´ë‹¹ ì´ë©”ì¼ë¡œ ë“±ë¡ëœ ëª¨ë“  ë¦¬í€˜ìŠ¤íŠ¸, ì—‘ì„¸ìŠ¤ í† í° ì‚­ì œ ë° ì—‘ì„¸ìŠ¤ í† í°ì€ ë¸”ë™ë¦¬ìŠ¤íŠ¸ ë“±ë¡&lt;/strong&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 02 Jul 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-10-logoutAll/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-10-logoutAll/</guid>
        
        <category>JWT</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
      <item>
        <title>MSA-9. MSA ì ìš©ê³¼ API Gateway</title>
        <description>&lt;p&gt;ë“œë””ì–´ MSAë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ ëª¨ë†€ë¦¬ì‹ìœ¼ë¡œ ì‘ì„±í•˜ë˜ í”„ë¡œì íŠ¸ë¥¼ ë‚˜ëˆ„ëŠ” ì‘ì—…ì„ ì‹œì‘í–ˆë‹¤. ìš°ì„  ë„ë©”ì¸ë³„ë¡œ ê¸°ëŠ¥ì„ ë¬¶ì„ë¼ í–ˆëŠ”ë° ì½”ë“œê°€ í•˜ë„ ê¼¬ì—¬ ìˆì–´ì„œ ê·¸ëƒ¥ í”„ë¡œì íŠ¸ë¥¼ ìƒˆë¡œ íŒŒê¸°ë¡œ ê²°ì‹¬í–ˆë‹¤. ê¸°ì¡´ ëª¨ë†€ë¦¬ì‹ í”„ë¡œì íŠ¸ ì•ˆë…•â€¦ ìƒˆë¡œ [member / product / order / API gateway] eureka client / eureka server ì´ë ‡ê²Œ ë‚˜ëˆ„ê³ , dbë¥¼ ì„¸ ê°œì˜ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì— ë”°ë¼ ê°ì íŒŒê¸°ë¡œ í–ˆë‹¤. ë ˆë””ìŠ¤ëŠ” &lt;strong&gt;ë³„ë‹¤ë¥¸ ë¶„ë¦¬ ì—†ì´ í•˜ë‚˜ì˜ ë ˆë””ìŠ¤&lt;/strong&gt;ë¥¼ ì‚¬ìš©í•œë‹¤.&lt;/p&gt;

&lt;h2 id=&quot;msa-ì ìš©í•˜ê¸°&quot;&gt;MSA ì ìš©í•˜ê¸°&lt;/h2&gt;

&lt;h3 id=&quot;1-ë„ë©”ì¸-ë¶„ë¦¬í•˜ì—¬-ë§ˆì´í¬ë¡œ-ì„œë¹„ìŠ¤-ìƒì„±&quot;&gt;1. ë„ë©”ì¸ ë¶„ë¦¬í•˜ì—¬ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ ìƒì„±&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Eureka Server&lt;/li&gt;
  &lt;li&gt;Eureka Client
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;API-gateway&lt;/strong&gt; - 8080&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;member&lt;/strong&gt; - 8081
        &lt;ul&gt;
          &lt;li&gt;redis: 6379:6379&lt;/li&gt;
          &lt;li&gt;mysql: 3306:3306
            &lt;ul&gt;
              &lt;li&gt;db: spring_proj_member&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;product&lt;/strong&gt; - 8082
        &lt;ul&gt;
          &lt;li&gt;redis: 6380:6379&lt;/li&gt;
          &lt;li&gt;mysql: 3308:3306
            &lt;ul&gt;
              &lt;li&gt;db: spring_proj_product&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;order&lt;/strong&gt; - 8083
        &lt;ul&gt;
          &lt;li&gt;redis: 6381:6379&lt;/li&gt;
          &lt;li&gt;mysql: 3309:3306
            &lt;ul&gt;
              &lt;li&gt;db: spring_proj_order&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;payment&lt;/strong&gt; - 8084
        &lt;ul&gt;
          &lt;li&gt;redis: 6382:6379&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ì´ëŸ° ì‹ìœ¼ë¡œ ì—°ê²°í–ˆë‹¤. í˜¸ìŠ¤íŠ¸ í¬íŠ¸ëŠ” ì¶©ëŒì´ ì¼ì–´ë‚˜ë‹ˆ ë‹¤ë¥¸ í¬íŠ¸ë¡œ ì—°ê²°í•˜ê³ , ì»¨í…Œì´ë„ˆë¥¼ ê°ê° ì„¸ì› ë‹¤.&lt;/p&gt;

&lt;p&gt;ì„¸ ê°€ì§€ì˜ ë„ë©”ì¸ ê°ê° db, ì¸í…”ë¦¬ì œì´ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ë„ì»¤ ì„¤ì •ê¹Œì§€ ì™„ë£Œí–ˆë‹¤. ìœ„ì—ì„œ ëª…ì‹œí•´ ë‘” ê²ƒì²˜ëŸ¼ ê° í”„ë¡œì íŠ¸ëŠ” ë¡œì»¬ í¬íŠ¸ 8081, 8082, 8083ë¡œ ì„¤ì •í–ˆê³  ë™ì‹œì— êµ¬ë™ë˜ëŠ” ê²ƒê¹Œì§€ í™•ì¸.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;em&gt;ì•½ê°„ ì´ë ‡ê²Œ ìƒê°í•˜ë©´ ì‰½ê² ë‹¤. API gatewayëŠ” ë¬´ì¡°ê±´ ì¸ì¦ì´ ì™„ë£Œëœ ìš”ì²­ë§Œ ê°ê°ì˜ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì— ì „ë‹¬í•œë‹¤â€¦!&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;ê·¸ëŸ¼ ìš°ì„  ì¸ì¦ ê´€ë ¨ ë‚´ìš©ì€ ì „ë¶€ ì œê±°í•˜ê³  API gateway ì—ì„œ í† í°ì— ëŒ€í•œ ê²€ì¦ê³¼ securityConfigë¥¼ ì„¤ì •í•œ ë‹¤ìŒ ì²˜ë¦¬í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ.&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ì´ì œ ê¸°ì¡´ êµ¬í˜„í•œ ì½”ë“œë¥¼ ë„ë©”ì¸ ë³„ë¡œ ì „ë¶€ ë¶„í• í•œë‹¤. ê·¸ë¦¬ê³  SecurityConfig, JWTUtilê°™ì€ í† í°ê³¼ ì¸ì¦ ê´€ë ¨ ì½”ë“œëŠ” ì „ë¶€ ì§€ìš°ê³  ë„ë©”ì¸ ë³„ë¡œ ê¸°ëŠ¥ì„ ì •ë¦¬í•œë‹¤.&lt;/p&gt;

&lt;h3 id=&quot;2-api-gateway-ë§Œë“¤ê¸°&quot;&gt;2. API Gateway ë§Œë“¤ê¸°&lt;/h3&gt;

&lt;p&gt;API GatewayëŠ” Spring cloudì™€ Netflix Eurekaë¥¼ ì´ìš©í–ˆë‹¤. webFluxì„ ì ìš©í•´ ë¹„ë™ê¸° ì²˜ë¦¬ë„ ì§€ì›í•œë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;í´ë¼ì´ì–¸íŠ¸ â†’ API Gateway&lt;/strong&gt;: í´ë¼ì´ì–¸íŠ¸ê°€ JWT í† í°ì„ í¬í•¨í•˜ì—¬ API Gatewayì— ìš”ì²­ì„ ë³´ëƒ„&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;API Gatewayì—ì„œ JWT ê²€ì¦&lt;/strong&gt;: API GatewayëŠ” JWT í† í°ì„ ê²€ì¦í•˜ê³  ê²€ì¦ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ í—¤ë”ì— ì¶”ê°€&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Eureka ì„œë²„ë¡œì˜ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬&lt;/strong&gt;: API GatewayëŠ” ë¶€íŒ… ì‹œ Eureka ì„œë²„ì—ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ìœ„ì¹˜ë¥¼ ì¡°íšŒí•˜ì—¬ ìºì‹œ&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;API Gateway â†’ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤&lt;/strong&gt;: API GatewayëŠ” ìš”ì²­ì„ ì ì ˆí•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „ë‹¬&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ìš”ì²­ ì²˜ë¦¬&lt;/strong&gt;: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì „ë‹¬ëœ ìš”ì²­ì„ ì²˜ë¦¬&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;API Gateway ì„œë¹„ìŠ¤ì— JWT í† í°ì˜ ê²€ì¦ ë¡œì§ì„ í¬í•¨í•˜ì—¬ ê²€ì¦ ë¡œì§ì„ í†µê³¼í•œ ìš”ì²­ë§Œ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ë¡œ ë³´ë‚¼ ë•Œ í—¤ë”ì— ì‚¬ìš©ìì˜ ì´ë©”ì¼ ì •ë³´ë¥¼ í—¤ë”ì— ë‹´ì•„ ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì— ì „ë‹¬ â†’ ê° ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ëŠ” ê²€ì¦ëœ ì´ë©”ì¼ì„ ì‹ ë¢°í•˜ê³  í•´ë‹¹ ì´ë©”ì¼ë¡œ ê° ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Java&quot;&gt;return chain.filter(exchange.mutate()
                                .request(exchange.getRequest().mutate()
                                        .header(&quot;Authenticated-User&quot;, email)
                                        .build())
                                .build())
                        .contextWrite(ReactiveSecurityContextHolder.withAuthentication(auth));
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;í—¤ë”ì˜ í† í°ì„ ê²€ì¦í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹Œ, í—¤ë”ì— í¬í•¨ëœ ì´ë©”ì¼ë¡œ ë¡œì§ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ê° ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì˜ ë¡œì§ì„ ë³€ê²½í–ˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ê·¸ë˜ì„œ ì¼ë‹¨ ê° ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ securityConfigì—ì„œ permitAll()ë¡œ ë‹¤ ëš«ì–´ë†“ê¸´ í–ˆë‹¤ (í´ë¼ì´ì–¸íŠ¸ê°€ ê° ì„œë²„ ì§í†µ í¬íŠ¸ë¡œ ìš”ì²­ ë³´ë‚¼ ì¼ì€ ì—†ë‹¤ëŠ” ì¡°ê±´ì„ ìƒì •í•˜ì˜€ìœ¼ë‚˜, ì´ ë¶€ë¶„ì€ ë” ê³µë¶€í•´ì•¼ í•  ê²ƒ ê°™ë‹¤.)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;3-ì„œë¹„ìŠ¤-ê°„-í†µì‹ -ë¹„ë™ê¸°&quot;&gt;3. ì„œë¹„ìŠ¤ ê°„ í†µì‹  (ë¹„ë™ê¸°)&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;Kafka ì‚¬ìš©í•˜ê¸°&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ì™œ Kafkaë¥¼ ì„ íƒí–ˆëŠ”ê°€?&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ë¹„ë™ê¸° í†µì‹ &lt;/strong&gt;ì€ ì„œë¹„ìŠ¤ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™í•  ìˆ˜ ìˆê²Œ í•œë‹¤. ì´ëŠ” MSAê°€ ì¶”êµ¬í•˜ëŠ” ë°©í–¥ê³¼ ê°™ë‹¤.&lt;/li&gt;
  &lt;li&gt;KafkaëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì˜ &lt;strong&gt;ë¹„ë™ê¸° í†µì‹ ì„ ì§€ì›&lt;/strong&gt;í•˜ì—¬ ì‹œìŠ¤í…œì˜ ìœ ì—°ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.&lt;/li&gt;
  &lt;li&gt;KafkaëŠ” ë†’ì€ ì²˜ë¦¬ëŸ‰ê³¼ í™•ì¥ì„±ì„ ì œê³µí•˜ëŠ” ë¶„ì‚° ìŠ¤íŠ¸ë¦¬ë° í”Œë«í¼ì´ë©°, &lt;strong&gt;íŒŒí‹°ì…˜ì„ í†µí•´ ë°ì´í„° ì²˜ë¦¬ë¥¼ ë³‘ë ¬ë¡œ ìˆ˜í–‰&lt;/strong&gt;í•  &lt;em&gt;**&lt;/em&gt;ìˆ˜ ìˆë‹¤.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Eventë€ ë¹„ì¦ˆë‹ˆìŠ¤ì—ì„œ ì¼ì–´ë‚˜ëŠ” ëª¨ë“  ì¼ (ë°ì´í„°)ì„ ì˜ë¯¸í•œë‹¤. &lt;strong&gt;3ê°€ì§€ íŠ¹ì§•&lt;/strong&gt;ì„ ê°–ê³  ìˆë‹¤.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì•ˆì „í•˜ê²Œ ì „ì†¡í•œë‹¤. (Pub &amp;amp; Sub ê¸°ëŠ¥)&lt;/li&gt;
  &lt;li&gt;ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë””ìŠ¤íŠ¸ì— ì €ì¥í•œë‹¤. (ë‹¤ë¥¸ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ê³¼ì˜ ì°¨ë³„ì )&lt;/li&gt;
  &lt;li&gt;ëŒ€ìš©ëŸ‰ì˜ ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë¶„ì„ ë° ì²˜ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. (ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•¨ìœ¼ë¡œ ì´ ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ì„œ ë¶„ì„ ë° ì²˜ë¦¬ê°€ ê°€ëŠ¥)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;ì¹´í”„ì¹´ ê¸°ë³¸ ê°œë…&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;í† í”½&lt;/strong&gt;: ì¹´í”„ì¹´ ì•ˆì— ë©”ì‹œì§€ê°€ ì €ì¥ë˜ëŠ” ì¥ì†Œ&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;í”„ë¡œë“€ì„œ&lt;/strong&gt;Â : ë©”ì„¸ì§€ë¥¼ ìƒì„±í•´ì„œ í† í”½ìœ¼ë¡œ ë³´ë‚´ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ì»¨ìŠˆë¨¸&lt;/strong&gt;Â : í† í”½ì˜ ë©”ì„¸ì§€ë¥¼ ê°€ì ¸ì™€ì„œ í™œìš©í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;ì¹´í”„ì¹´ êµ¬ì„± ìš”ì†Œ&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;ì¹´í”„ì¹´ëŠ” í¬ê²Œ í”„ë¡œë“€ì„œ, ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„°(+ë¸Œë¡œì»¤), ì£¼í‚¤í¼, ì»¨ìŠˆë¨¸ë¡œ êµ¬ì„±ë˜ì–´ìˆë‹¤.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ì¹´í”„ì¹´ ë¸Œë¡œì»¤:&lt;/strong&gt; íŒŒí‹°ì…˜ì— ëŒ€í•œ Read, Writeë¥¼ ê´€ë¦¬í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´. í•˜ë‚˜ì˜ í´ëŸ¬ìŠ¤í„°ëŠ” ìµœì†Œ 4ëŒ€ì´ìƒì˜ ë¸Œë¡œì»¤ë¡œ êµ¬ì„±ë˜ê¸¸ ê¶Œì¥í•¨.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;ì£¼í‚¤í¼:&lt;/strong&gt; ë¸Œë¡œì»¤ë¥¼ ê´€ë¦¬(ë¸Œë¡œì»¤ë“¤ì˜ ëª©ë¡/ì„¤ì •)í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´. í•˜ì§€ë§Œ í˜„ì¬ ì¹´í”„ì¹´ 3ë¶€í„°ëŠ” ì£¼í”¼ì»¤ ëŒ€ì‹  KRaftë¡œ ì¹´í”„ì¹´ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì— ë¸Œë¡œì»¤ ê´€ë ¨ ë©”íƒ€ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ì¹´í”„ì¹´ëŠ” ë³‘ë ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œìœ¼ë¡œ íŒŒí‹°ì…˜ì´ 1ê°œê°€ ì•„ë‹ˆë¼ë©´ &lt;strong&gt;ëª¨ë“  ë©”ì„¸ì§€ì— ëŒ€í•œ ì „ì²´ ìˆœì„œë¥¼ ë³´ì¥í•˜ê¸° ì–´ë µë‹¤&lt;/strong&gt;. íŒŒí‹°ì…”ë„ì„ í†µí•´ keyì— ì˜í•˜ì—¬ &lt;strong&gt;ë¶„ì‚°&lt;/strong&gt;ë˜ì–´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œ ëª¨ë“  ë°ì´í„°ì— ëŒ€í•œ ìˆœì„œë¥¼ ë³´ì¥í•  í•„ìš”ê°€ ì—†ë‹¤. &lt;strong&gt;íŠ¹ì • ê³ ê° ë˜ëŠ” íŠ¹ì • í‚¤ì˜ ë°ì´í„°ì˜ ìˆœì„œë§Œ ë³´ì¥ë°›ìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤&lt;/strong&gt;. ì¦‰, í‚¤ì— ëŒ€í•œ ìˆœì„œê°€ ë³´ì¥ë¨ìœ¼ë¡œ ì´ ë¶€ë¶„ì— ëŒ€í•œ ë¬¸ì œëŠ” ë©€í‹° íŒŒí‹°ì…˜ì„ ì´ìš©í•˜ëŠ”ë° ì´ìŠˆê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤. &lt;strong&gt;ë‹¨, ìš´ì˜ ì¤‘ì— íŒŒí‹°ì…˜ ê°œìˆ˜ë¥¼ ë³€ê²½í•˜ê²Œ ë˜ë©´ ìˆœì„œë¥¼ ë³´ì¥ë°›ê¸° ì–´ë µë‹¤. ì´ ì ì„ ë°˜ë“œì‹œ ê¸°ì–µí•´ì•¼ í•¨.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;â†’ ë‚´ í”„ë¡œì íŠ¸ì—ì„œ Paymentì—ì„œ ë°œí–‰í•˜ëŠ” ëª¨ë“  ì´ë²¤íŠ¸ëŠ” íŒŒí‹°ì…˜ 1ê°œë¡œ êµ¬ë…í•˜ê²Œ í•  ê²ƒì´ë‹¤. íŠ¹ì • í‚¤ ì—†ì´ &lt;strong&gt;ìš”ì²­ ìˆœì„œê°€ ë³´ì¥ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.&lt;/strong&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 26 Jun 2024 00:00:00 +0900</pubDate>
        <link>https://yuju-lee.github.io/logs/MSA-9-MSAandAPIgateway/</link>
        <guid isPermaLink="true">https://yuju-lee.github.io/logs/MSA-9-MSAandAPIgateway/</guid>
        
        <category>Kafka</category>
        
        <category>MSA</category>
        
        <category>API-Gateway</category>
        
        <category>JAVA-Springboot</category>
        
        
        <category>logs</category>
        
      </item>
    
  </channel>
</rss>
